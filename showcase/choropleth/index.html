---
layout: showcase
title: Choropleth Maps
about: This choropleth map shows population data for each of the departements of metropolean France.  In general, mapping absolute quantities to values result in erroneous images since larger areas are perceived. Another way to get around this issue is to use <a href="/showcase/dotgrid/">dot grid maps</a>.
prev: italia
next: charts
---

<script type="text/javascript">

$script.ready(['kartograph'], function() {

	$(function() {
		var map,
			colorscale,
			dep_data,
			w = $('#map').parent().width();

		$.ajax({
			url: 'departments.json',
			dataType: 'json',
			success: function(data) {
				dep_data = data;

				map = $K.map('#map', w, w);
				map.loadMap('france-departments.svg', function() {
					map.loadStyles('styles.css', function() {
						map.addLayer({
							id: 'departments',
							key: 'id',
							titles: function(d) { console.log(d) }
						});
						updateMap();
					})
				});
			}
		});

		/*
		 * update map colors
		 */
		function updateMap() {
			var prop = $('.measure.btn-custom').data('value'),
				scale = $('.scale.btn-custom').data('value'),
				colors = $('.colors.btn-custom').data('value');

			colorscale = new chroma.ColorScale({
				colors: chroma.brewer[colors],
				limits: chroma.limits(dep_data, scale, 7, prop)
			});

			map.choropleth({
				data: dep_data,
				key: 'id',
				colors: function(d) {
					if (d == null) return '#fff';
					return colorscale.getColor(d[prop]);
				},
				duration: 0
			});

		}

		// init user interface
		$('.btn').click(function(event) {
			var tgt = $(event.target), par = tgt.parent();
			$('.btn', par).removeClass('btn-custom');
			tgt.addClass('btn-custom');
			updateMap();
		});

	});

});
</script>

<div class="row">
	<div class="span4 content">

		<h2>Variable</h2>
		<p>Again, it's a bad idea to display absolute quantities (such as population) on a choropleth map.</p>
		<p>
			<a class="measure btn btn-custom" data-value="density">Population Density</a>
			<a class="measure btn" data-value="pop">Population</a>
		</p>
		<h2>Classes</h2>
		<p>The class limits are computed using <a href="https://github.com/gka/chroma.js">chroma.js</a>.
		<p>
			<a class="scale btn btn-custom" data-value="q">Quantiles</a>
			<a class="scale btn" data-value="e">Equidistant</a>
			<a class="scale btn" data-value="k">k-Means</a>
		</p>
		<h2>Colors</h2>
		<p>The colors are taken from <a href="http://colorbrewer2.org">ColorBrewer</a>. They are already included in <a href="https://github.com/gka/chroma.js">chroma.js</a>.</p>
		<p style="line-height:33px">
			Single hue:<br />
			<a class="colors btn" data-value="Grays">Grays</a>
			<a class="colors btn" data-value="Blues">Blues</a>
			<a class="colors btn" data-value="Reds">Reds</a>
			<a class="colors btn" data-value="Oranges">Oranges</a>
			<a class="colors btn" data-value="Greens">Greens</a>
			<a class="colors btn" data-value="Purples">Purples</a><br />
			Multiple hues: <br />
			<a class="colors btn" data-value="OrRd">Orange &rarr; Red</a>
			<a class="colors btn" data-value="PuBu">Purple &rarr; Blue</a>
			<a class="colors btn" data-value="PuRd">Purple &rarr; Red</a>
			<a class="colors btn" data-value="RdPu">Red &rarr; Purple</a>
			<a class="colors btn" data-value="BuPu">Blue &rarr; Purple</a>
			<a class="colors btn" data-value="BuGn">Blue &rarr; Green</a>
			<a class="colors btn" data-value="YlGn">Yellow &rarr; Green</a>
			<a class="colors btn" data-value="GnBu">Green &rarr; Blue</a>
			<a class="colors btn btn-custom" data-value="YlGnBu">Yellow &rarr; Green &rarr; Blue</a>
			<a class="colors btn" data-value="YlOrBr">Yellow &rarr; Orange &rarr; Brown</a>
			<a class="colors btn" data-value="YlOrRd">Yellow &rarr; Orange &rarr; Red</a>
			<a class="colors btn" data-value="PuBuGn">Purple &rarr; Blue &rarr; Green</a>
			
		</p>
	</div>
	<div class="span8">
		<div id="map">&nbsp;</div>
	</div>
</div>
